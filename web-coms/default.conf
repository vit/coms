
server {
    # index index.php index.html;
    index index.html;

    server_name coms.physcon.my coms.physcon.ru;
    error_log  /var/log/nginx/error.log;
    access_log /var/log/nginx/access.log;

    # root /var/www/html/php/coms;
    root /var/www/html;


    client_max_body_size 100M;


    # rewrite ^/(conf|contman|getpaper)/(.*)$ /$1.php/$2 last;

    rewrite ^/(conf|contman|getpaper)$ /$1/ redirect;
    rewrite ^/(conf|contman|getpaper)/(.*)$ /$1.php/$2 last;

    # location ~ (\.html|\.php.*|\.templ|.+\/)$ {
    location / {

        location /admin/ {
            auth_basic          "ADMIN Login";
            auth_basic_user_file /etc/nginx/.htpasswd-coms;

            fastcgi_split_path_info ^(.+\.php)(/.*)$;

            fastcgi_pass php-fpm-coms:9000;
            fastcgi_index index.html;
            include fastcgi_params;

            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_param PATH_INFO $fastcgi_path_info;
        }

        fastcgi_split_path_info ^(.+\.php)(/.*)$;

        fastcgi_pass php-fpm-coms:9000;
        fastcgi_index index.html;
        include fastcgi_params;

        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_param PATH_INFO $fastcgi_path_info;
    }

}






# server {
#     index index.html;
#     server_name album.physcon.my album.physcon.ru;
#     error_log  /var/log/nginx/error.log;
#     access_log /var/log/nginx/access.log;

#     root /var/www/html/php/album;

#     location ~ (\.html|\.php|\.templ|.+\/)$ {
#         fastcgi_split_path_info ^(.+\.html)(/.+)$;

#         fastcgi_pass php-fpm:9000;
#         fastcgi_index index.html;

#         include fastcgi_params;
#         fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
#         fastcgi_param PATH_INFO $fastcgi_path_info;
#     }
# }

# server {
#     # index index.php index.html;
#     index index.html;
#     # server_name phpfpm.local;
#     server_name conf.physcon.my conf.physcon.ru;
#     error_log  /var/log/nginx/error.log;
#     access_log /var/log/nginx/access.log;

#     root /var/www/html/php/conf;

#     # location ~ \.html$ {
#     # location ~ (\.php|\.html|\.templ|\/)$ {
#     # location ~ (\.php|\.templ|\/)$ {
#     location ~ (\.html|\.php|\.templ|.+\/)$ {
#         # try_files $uri =404;
#         fastcgi_split_path_info ^(.+\.html)(/.+)$;

#         # include snippets/fastcgi-php.conf;
#         fastcgi_pass php-fpm:9000;
#         fastcgi_index index.html;
# #        fastcgi_index index.php;

#         include fastcgi_params;
#         fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
#         fastcgi_param PATH_INFO $fastcgi_path_info;

#     }

# }


# server {
#     index index.html;
#     server_name ieee.physcon.my ieee.physcon.ru;
#     error_log  /var/log/nginx/error.log;
#     access_log /var/log/nginx/access.log;

#     root /var/www/html/php/ieee;

#     location ~ (\.html|\.php|\.templ|.+\/)$ {
#         fastcgi_split_path_info ^(.+\.html)(/.+)$;

#         fastcgi_pass php-fpm:9000;
#         fastcgi_index index.html;

#         include fastcgi_params;
#         fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
#         fastcgi_param PATH_INFO $fastcgi_path_info;
#     }
# }








# server {

#         server_name physcon.my www.physcon.my lib.physcon.my cap.physcon.my physcon.ru www.physcon.ru lib.physcon.ru cap.physcon.ru;


#         location ~ ^/(logo|img) {
#                 root /home/www/html/php/;
#         }
#         location ~ /dir {
#                 root /var/www/html/php/;
#                 if (-d $request_filename) {
#                         rewrite ^(.*[^/])$  $1/ permanent;
#                 }


#                 # rewrite ^/(dir|news)$ /$1/ redirect;
#                 # rewrite ^/(dir|news)/(.*)$ /$1.php/$2 last;

#                 rewrite ^/(dir|news)$ /$1/ permanent;
#                 rewrite ^/(dir|news)/(.*)$ /$1.php/$2 last;



#                 # fastcgi_split_path_info ^(.+\.php)(/.*)$;

#                 fastcgi_pass php-fpm:9000;
#                 fastcgi_index index.html;
#                 include fastcgi_params;

#                 fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
#                 fastcgi_param PATH_INFO $fastcgi_path_info;


#         }

# }




